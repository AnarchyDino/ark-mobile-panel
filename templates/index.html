<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ARK GOD MODE</title>
    <style>
        body { background:#0a0a0a; color:#fff; font-family:sans-serif; margin:0; padding:10px; padding-bottom:80px; }
        .card { background:#1a1a1a; padding:15px; border-radius:8px; margin-bottom:15px; border:1px solid #333; }
        h2 { color:#0f0; margin-top:0; border-bottom:1px solid #333; font-size:1.2rem; }
        
        .btn { width:100%; padding:15px; background:#333; color:#fff; border:none; border-radius:4px; font-weight:bold; margin-bottom:5px; font-size:1rem; }
        .btn-green { background:#00aa00; color:white; }
        .btn-red { background:#aa0000; color:white; }
        .btn-blue { background:#0066cc; color:white; }
        
        input, select { width:100%; padding:10px; background:#000; color:#fff; border:1px solid #555; margin-bottom:10px; border-radius:4px; font-size:1rem; }
        
        #console { background:#000; height:120px; overflow-y:auto; padding:10px; font-family:monospace; border:1px solid #444; color:#0f0; font-size:0.8rem; }
        
        .grid { display:grid; grid-template-columns:1fr 1fr; gap:5px; }
    </style>
</head>
<body>

    <div class="card">
        <h2>STATUS: <span id="status" style="color:red">DISCONNECTED</span></h2>
        <div id="console">System Ready...</div>
    </div>

    <div class="card">
        <h2>1. SELECT PLAYER</h2>
        <button class="btn btn-blue" onclick="scan()">üîÑ SCAN PLAYERS</button>
        <select id="playerSelect"><option value="">Scan First...</option></select>
    </div>

    <div class="card">
        <h2>2. WORLD CONTROL</h2>
        <div class="grid">
            <button class="btn" onclick="send('cheat SetTimeOfDay 06:00')">üåÖ DAWN</button>
            <button class="btn" onclick="send('cheat SetTimeOfDay 12:00')">‚òÄÔ∏è NOON</button>
            <button class="btn" onclick="send('cheat CE StopRain')">‚òÄÔ∏è CLEAR</button>
            <button class="btn" onclick="send('cheat CE StartRain')">üåßÔ∏è RAIN</button>
        </div>
        <button class="btn btn-red" style="margin-top:5px" onclick="send('SaveWorld')">üíæ FORCE SAVE</button>
    </div>

    <div class="card">
        <h2>3. GIVE KITS</h2>
        <div class="grid">
            <button class="btn btn-green" onclick="kit('pvp')">‚öîÔ∏è PVP KIT</button>
            <button class="btn btn-green" onclick="kit('tek')">ü§ñ TEK KIT</button>
            <button class="btn btn-green" onclick="kit('base')">üèóÔ∏è BASE KIT</button>
            <button class="btn btn-green" onclick="kit('tame')">ü•© TAME KIT</button>
        </div>
    </div>

    <script>
        let targetID = null;

        async function send(cmd) {
            log(`> ${cmd}`);
            try {
                const res = await fetch('/api/command', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({command: cmd})
                });
                const data = await res.json();
                log(`< ${data.response}`);
                
                if(data.response.includes("‚ùå")) {
                    document.getElementById('status').innerText = "ERROR";
                    document.getElementById('status').style.color = "red";
                } else {
                    document.getElementById('status').innerText = "ONLINE";
                    document.getElementById('status').style.color = "#0f0";
                }
            } catch(e) {
                log("‚ùå NETWORK ERROR: Check Render Logs");
            }
        }

        function log(msg) {
            const c = document.getElementById('console');
            c.innerHTML = `<div>${msg}</div>` + c.innerHTML;
        }

        async function scan() {
            const res = await fetch('/api/command', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({command: "ListPlayers"})
            });
            const data = await res.json();
            const list = document.getElementById('playerSelect');
            list.innerHTML = '<option value="">Select Player...</option>';
            
            // Regex to match: 0. Name, ID
            const matches = data.response.matchAll(/(\d+)\.\s(.*?),\s([0-9a-fA-F]+)/g);
            let found = false;
            for(const m of matches) {
                found = true;
                const opt = document.createElement('option');
                opt.text = m[2]; // Name
                opt.value = m[3]; // ID
                list.add(opt);
            }
            log(found ? "‚úÖ Players Found" : "‚ö†Ô∏è No Players Online");
            
            // Listener for selection
            list.onchange = function() { targetID = this.value; log(`Selected ID: ${targetID}`); };
        }

        async function kit(type) {
            if(!targetID) return alert("SELECT A PLAYER FIRST!");
            log(`Sending ${type} kit...`);
            
            const KITS = {
                'pvp': [
                    "Blueprint'/Game/PrimalEarth/CoreBlueprints/Weapons/PrimalItem_WeaponMachinedSniper.PrimalItem_WeaponMachinedSniper'",
                    "Blueprint'/Game/PrimalEarth/CoreBlueprints/Weapons/PrimalItemAmmo_AdvancedSniperBullet.PrimalItemAmmo_AdvancedSniperBullet'",
                    "Blueprint'/Game/PrimalEarth/CoreBlueprints/Items/Armor/Metal/PrimalItemArmor_MetalHelmet.PrimalItemArmor_MetalHelmet'",
                    "Blueprint'/Game/PrimalEarth/CoreBlueprints/Items/Armor/Metal/PrimalItemArmor_MetalShirt.PrimalItemArmor_MetalShirt'"
                ],
                'tek': [
                     "Blueprint'/Game/PrimalEarth/CoreBlueprints/Items/Armor/Tek/PrimalItemArmor_TekHelmet.PrimalItemArmor_TekHelmet'",
                     "Blueprint'/Game/PrimalEarth/CoreBlueprints/Items/Armor/Tek/PrimalItemArmor_TekShirt.PrimalItemArmor_TekShirt'",
                     "Blueprint'/Game/PrimalEarth/CoreBlueprints/Weapons/PrimalItem_TekRifle.PrimalItem_TekRifle'",
                     "Blueprint'/Game/PrimalEarth/CoreBlueprints/Resources/PrimalItemResource_Element.PrimalItemResource_Element'"
                ],
                'base': [
                    "Blueprint'/Game/PrimalEarth/CoreBlueprints/Items/Structures/Metal/PrimalItemStructure_MetalFloor.PrimalItemStructure_MetalFloor'",
                    "Blueprint'/Game/PrimalEarth/CoreBlueprints/Items/Structures/Metal/PrimalItemStructure_MetalWall.PrimalItemStructure_MetalWall'",
                    "Blueprint'/Game/PrimalEarth/CoreBlueprints/Items/Structures/Misc/PrimalItemStructure_TurretTek.PrimalItemStructure_TurretTek'"
                ],
                'tame': [
                    "Blueprint'/Game/PrimalEarth/CoreBlueprints/Items/Consumables/PrimalItemConsumable_Narcotic.PrimalItemConsumable_Narcotic'",
                    "Blueprint'/Game/PrimalEarth/CoreBlueprints/Items/Consumables/PrimalItemConsumable_Kibble_Base_XLarge.PrimalItemConsumable_Kibble_Base_XLarge'",
                    "Blueprint'/Game/PrimalEarth/CoreBlueprints/Weapons/PrimalItem_WeaponCrossbow.PrimalItem_WeaponCrossbow'"
                ]
            };
            
            const items = KITS[type];
            for(const bp of items) {
                // Quantity 1, Quality 0
                await send(`GiveItemToPlayer ${targetID} "${bp}" 1 0 0`);
            }
        }
    </script>
</body>
</html>
